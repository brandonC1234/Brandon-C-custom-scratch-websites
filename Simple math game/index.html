<!DOCTYPE html>
<html>
	<head>
		<title>Random Math Game</title>
	</head>

	<body>
		<h4 id="upper">Welcome to the Math addition game.</h4>
		<label for="time">Countdown in seconds:</label>
		<input id="time" size="5" value="10"></input>
		<br>
		<label for="startNum">Starting maximum number:</label>
		<input id="startNum" value="10" size="5">
		<br>
		<label for="multiplier">difficulty mulplier:</label>
		<input type="range" id="multiplier" min="0" max="10" value="2"></input> <button onclick="updateMult()">update</button>
		<p id="multText">2</p>
		<label for="divisor">difficulty divisor:</label>
		<input type="range" id="divisor" min="1" max="10" value="2"></input> <button onclick="updateDiv()">update</button>
		<p id="divText">2</p>
		
		<h4 id="question">Click start when you are ready to begin</h4>
        <input id="input" placeholder="Your Message Here" size="20"></input> <button onclick="check()">check</button>
		<h4 id="message"></h4>
		<h4 id="five"></h4>
        <h4 id="three"></h4>
        <button onclick="start()">start</button>
        
        
        <script>
            
            var a = 0;
            var b = 0;
            var con = false;
            var done = false;
            var max = 10;
            var time = 10;
            var multiplier = 2;
            var divisor = 2;
            var t = 0;
            var countT = 0;
            var out = false;
            var counting = false;
            var score = 0;
            
    		function start() {
    		    con = true
    		    out = false
    		    t = 0
    		    document.getElementById("message").innerHTML = ""
    		    document.getElementById("input").value = ""
    		    time = document.getElementById("time").value
    		    max = document.getElementById("startNum").value
    		    max = parseInt(max)
    		    multiplier = document.getElementById("multiplier").value
    		    divisor = document.getElementById("divisor").value
    		    score = 0
    		    ask()
    		}
    		
    		function ask() {
    		    console.log("Max: " + max)
    		    a = Math.floor(Math.random() * max) + 1
    		    b = Math.floor(Math.random() * max) + 1
    		    text = "What is " + a + " + " + b
    		    document.getElementById("question").innerHTML = text
    		    done = false
    		    fiveSecs = setTimeout(fiveSec, (time * 1000) - 5000)
    		}
    		function fiveSec(){
    		    if (done == false){
    		        document.getElementById("five").innerHTML = "FIVE SECONDS LEFT"
    		    }
    		    countdown = setInterval(count, 1000);
    		    counting = true
    		}
    		function count(){
    		    if (countT == 2){
    		        document.getElementById("three").innerHTML = "3"
    		    }else if (countT == 3){
    		        document.getElementById("three").innerHTML = "2"
    		    }else if (countT == 4){
    		        document.getElementById("three").innerHTML = "1"
    		    }else if(countT == 5){
    		        document.getElementById("three").innerHTML = "Time's up!"
    		        out = true
    		        check()
    		    } else {
    		        
    		    }
    		    
    		    countT += 1
    		    
    		}
    		function check(){
    		    clearTimeout(fiveSecs)
    		    if (counting == true){
    		        clearInterval(countdown)
    		        counting = false
    		    }
    		    countT = 0
    		    document.getElementById("five").innerHTML = ""
    		    document.getElementById("three").innerHTML = ""
    		    if (out == false){
        		    var answer = parseInt(document.getElementById("input").value)
        		    document.getElementById("input").value = ""
        		    if (answer == a + b){
        		        document.getElementById("message").innerHTML = "correct!"
        		        max = max + (multiplier * Math.floor(t / divisor))
        		        ask()
        		        t += 1
        		        score += 1
        		        setTimeout(clear, 1250)
        		    }else{
        		        endText = "Good try! Score: " + score;
        		        document.getElementById("message").innerHTML = endText
        		        questionText = "Click start when you are ready to try again. Last question: " + a + " + " + b + " = " + (a + b)
        		        document.getElementById("question").innerHTML = questionText
        		    }
        		} else {
        		    endText = "Time's up, good try! Score: " + score;
        		    document.getElementById("message").innerHTML = endText
        		    questionText = "Click start when you are ready to try again. Last question: " + a + " + " + b + " = " + (a + b)
        		    document.getElementById("question").innerHTML = questionText
        		}
    		    
    		}
    		function clear(){
    		    document.getElementById("message").innerHTML = ""
    		}
    		function updateMult(){
    		    document.getElementById("multText").innerHTML = document.getElementById("multiplier").value
    		}
    		function updateDiv(){
    		    document.getElementById("divText").innerHTML = document.getElementById("divisor").value
    		}
        </script>
        
	</body>
</html>
